<!DOCTYPE html>
<html>

<head>
    <title>Bookmartian - Manage Tags</title>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="stylesheet" href="/font-awesome-4.6.3/css/font-awesome.min.css">
    <link REL=StyleSheet HREF="style.css" TYPE="text/css" MEDIA=screen>
    <!-- <link REL=StyleSheet HREF="style.mobile.css" TYPE="text/css" MEDIA='only screen and (max-width: 800px)'> -->
    <link REL=StyleSheet HREF="colors.css" TYPE="text/css" MEDIA=screen>
</head>

<body class="paper-color">
    <script src="jquery-3.1.0.min.js"></script>
    <script src="utils.js"></script>
    
    <!-- sidebar -->
    
    <div class="sidebar default-primary-color">
        <input class='searchbox' style="visibility: hidden" type="text" id='searchterm' />

        <div class="admin-links tagcloud secondary-text-color" id="admin-links">
            BOOKMARTIAN</br>
            . <a href="addbookmark.html">add a bookmark...</a></br>
            . <a href="tags.html">manage tags</a></br>
            . <a href="options.html">settings</a></br>
            . <a href="help.html">help</a></br>
            . <a href="about.html">about</a></br>
        </div>

        <hr class="divider-color" />

        <div class="return-home tagcloud">
            <a href="/">&lt; return to home</a></br>
        </div>

        <hr class="divider-color" />
        <!-- footer -->
        <div class='footer secondary-text-color'>
            2018 mlamb/jmutchek
        </div>

        <div style="height:800px">
        </div>
    </div>

    <div class="mainbody">

        <h1>Manage Tags</h1>
        <hr class="divider-color" />

        <h2>Tag Cloud (work in progress)</h2>
        <p class="admin-links tagcloud secondary-text-color">rename | set color | delete | merge</p>
        <form>
        <div id="tagcloud" class="tagcolumns">
        </form>
        </div>


    <script>
        // get the about / version info from the API
        $.ajax({
            // The URL for the request
            url: API_QueryTags,

            // Whether this is a POST or GET request
            type: "GET",

            // The type of data we expect back
            dataType: "json"
        })
            // Code to run if the request succeeds (is done);
            // The response is passed to the function
            .done(function (json) {
                if ($("#tagcloud").data("results_hash") != stringToIntegerHash(JSON.stringify(json))) {

                // save the hash of the query results for comparison on update
                $("#tagcloud").data("results_hash", stringToIntegerHash(JSON.stringify(json)));

                $("#tagcloud").empty();
    
                $(json).each(function (index, element) {
                    if (element.name.substr(0, 1) !== ".") {
                        $("#tagcloud").append(
                            "<div class='tagblock'>"
                                + "<input type='checkbox' class='tagcontrols'>"
                                + "<div id=" + element.name + " class='tagname' >" + element.name + "</div>"
                            + "</div>");
                    }
                })
            }
            })
            // Code to run if the request fails; the raw request and
            // status codes are passed to the function
            .fail(function (xhr, status, errorThrown) {
                console.log("Error: " + errorThrown);
                console.log("Status: " + status);
                console.dir(xhr);
            })
            // Code to run regardless of success or failure;
            .always(function (xhr, status) {

            });
    </script>

</body>

</html>